<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>zszBlog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="this zszdeveloper blog��welcome��">
<meta property="og:type" content="website">
<meta property="og:title" content="zszBlog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="zszBlog">
<meta property="og:description" content="this zszdeveloper blog��welcome��">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="zszBlog">
<meta name="twitter:description" content="this zszdeveloper blog��welcome��">
  
  
  <link href='//fonts.useso.com/css?family=Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>
  <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css" type="text/css">
  

  
</head>
<body>
  <div id="container">
    <header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="/" id="logo"><i class="logo"></i><span class="site-title">zszBlog</span></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/.">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/categories">Categories</a>
        
          <a class="main-nav-link" href="/tags">Tags</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <div class="profile" id="profile-nav">
          <a id="profile-anchor" href="javascript:;"><img class="avatar" src="http://cl.ly/image/382p262u1E3o/%60IF)_M7]QGJMAK096_$F$$6.png"><i class="fa fa-caret-down"></i></a>
        </div>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"> </button><input type="hidden" name="q" value="site:http://yoursite.com"></form>
      </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tr>
      
        <td><a class="main-nav-link" href="/.">Home</a></td>
      
        <td><a class="main-nav-link" href="/archives">Archives</a></td>
      
        <td><a class="main-nav-link" href="/categories">Categories</a></td>
      
        <td><a class="main-nav-link" href="/tags">Tags</a></td>
      
        <td><a class="main-nav-link" href="/about">About</a></td>
      
      <td>
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="hidden" name="q" value="site:http://yoursite.com"></form>
      </td>
      </tr>
    </table>
  </div>
</header>
    <div class="outer">
      <aside id="profile">
  <div class="inner profile-inner">
  	<div class="base-info profile-block">
		  <img id="avatar" src="http://cl.ly/image/382p262u1E3o/%60IF)_M7]QGJMAK096_$F$$6.png">
      <h2 id="name">zszdevelop</h2>
      <h3 id="title">Java&amp;Android Developer</h3>
      <span id="location"><i class="fa fa-map-marker"></i>XiaMen, China</span>
      <a id="follow" href="undefined">FOLLOW</a>
  	</div>
    <div class="article-info profile-block">
      <div class="article-info-block">
        70
        <span>posts</span>
      </div>
      <div class="article-info-block">
        0
        <span>tag</span>
      </div>
    </div>
    
    <div class="contact-info profile-block">
      <table class="contact-list">
        <tr>
        
          <td><a href="https://github.com/zszdevelop" target="_blank" title="github"><i class="fa fa-github"></i></a></td>
        
          <td><a href="/#" target="_blank" title="twitter"><i class="fa fa-twitter"></i></a></td>
        
          <td><a href="https://www.facebook.com/profile.php?id=100007317255366" target="_blank" title="facebook"><i class="fa fa-facebook"></i></a></td>
        
        </tr>
      </table>
    </div>
    
  </div>
</aside>
      <section id="main">
      <article id="post-2015-9-14" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/14/2015-9-14/">2015/9/14</a>
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/2015/09/14/2015-9-14/">
    <time datetime="2015-09-14T08:44:19.000Z" itemprop="datePublished">2015-09-14</time>
  </a>
</div>
          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="2015/9/14">2015/9/14</h1><h2 id="膜拜亮大神之—-Toast">膜拜亮大神之—-Toast</h2><p>不单纯的Toast，先上代码。</p>
<pre><code><span class="keyword">package</span> com.zsz.develop.mytoast.mytoast;

<span class="keyword">import</span> android.app.Activity;
<span class="keyword">import</span> android.app.AlertDialog;
<span class="keyword">import</span> android.view.Gravity;
<span class="keyword">import</span> android.view.LayoutInflater;
<span class="keyword">import</span> android.view.View;
<span class="keyword">import</span> android.view.ViewGroup;
<span class="keyword">import</span> android.widget.ImageView;
<span class="keyword">import</span> android.widget.LinearLayout;
<span class="keyword">import</span> android.widget.TextView;
<span class="keyword">import</span> android.widget.Toast;

<span class="keyword">import</span> com.zsz.develop.mytoast.R;


<span class="javadoc">/**
 *<span class="javadoctag"> @author</span> LigthWang
 * 
 *         自定义土司
 */</span>
<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyToast</span> </span>{

<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TOASTBTN_1 = <span class="string">"这是默认的Toast显示"</span>;
<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TOASTBTN_2 = <span class="string">"这是自定义位置的Toast显示"</span>;
<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TOASTBTN_3 = <span class="string">"这是带图片的Toast显示"</span>;
<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TOASTBTN_4 = <span class="string">"这是完全自定义的Toast显示"</span>;
<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TOASTBTN_5 = <span class="string">"这是长时间的Toast显示"</span>;
<span class="keyword">private</span> <span class="keyword">static</span> Toast toast = <span class="keyword">null</span>;

<span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">void</span> <span class="title">showToast</span><span class="params">(<span class="keyword">int</span> witch, Activity context)</span> </span>{
    AlertDialog.Builder builder;
    AlertDialog dialog;
    <span class="keyword">switch</span> (witch) {
    <span class="keyword">case</span> <span class="number">0</span>:
        toast.makeText(context, TOASTBTN_1, Toast.LENGTH_LONG).show();
        <span class="keyword">break</span>;

    <span class="keyword">case</span> <span class="number">1</span>:
        toast = Toast.makeText(context, TOASTBTN_2, Toast.LENGTH_LONG);
        toast.setGravity(Gravity.CENTER, <span class="number">0</span>, <span class="number">0</span>);
        toast.show();
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="number">2</span>:
        toast = Toast.makeText(context, TOASTBTN_3, Toast.LENGTH_LONG);
        toast.setGravity(Gravity.CENTER, <span class="number">50</span>, -<span class="number">100</span>);
        LinearLayout layout = (LinearLayout) toast.getView();
        ImageView image = <span class="keyword">new</span> ImageView(context);
        image.setImageResource(R.drawable.wallpaper_tree_small);
        layout.addView(image, <span class="number">0</span>);
        toast.show();
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="number">3</span>:
        LayoutInflater inflater = context.getLayoutInflater();
        View view = inflater.inflate(R.layout.userdefinedtoast,
                (ViewGroup) context.findViewById(R.id.toast_layout));
        TextView txtView_Title = (TextView) view
                .findViewById(R.id.txt_Title);
        TextView txtView_Context = (TextView) view
                .findViewById(R.id.txt_context);
        ImageView imageView = (ImageView) view
                .findViewById(R.id.image_toast);
        toast = <span class="keyword">new</span> Toast(context);
        toast.setGravity(Gravity.CENTER, <span class="number">0</span>, <span class="number">0</span>);
        toast.setDuration(Toast.LENGTH_LONG);
        toast.setView(view);
        toast.show();
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="number">4</span>:
        LayoutInflater inflater1 = context.getLayoutInflater();
        View view1 = inflater1.inflate(R.layout.userdefinedtoast,
                (ViewGroup) context.findViewById(R.id.toast_layout));
        TextView txtView_Title1 = (TextView) view1
                .findViewById(R.id.txt_Title);
        TextView txtView_Context1 = (TextView) view1
                .findViewById(R.id.txt_context);
        ImageView imageView1 = (ImageView) view1
                .findViewById(R.id.image_toast);
        builder = <span class="keyword">new</span> AlertDialog.Builder(context);
        builder.setView(view1);
        dialog = builder.create();
        dialog.show();
        <span class="keyword">break</span>;
    }
}

}
</code></pre><p>需要通过加载xml的时候的Toast，这样就让Toast实现了彻底自定义。</p>
<pre><code>&lt;?xml <span class="variable">version=</span><span class="string">"1.0"</span> <span class="variable">encoding=</span><span class="string">"utf-8"</span>?&gt;
&lt;LinearLayout xmlns:<span class="variable">android=</span><span class="string">"http://schemas.android.com/apk/res/android"</span>
android:<span class="variable">id=</span><span class="string">"@+id/toast_layout"</span>
android:<span class="variable">layout_width=</span><span class="string">"200dip"</span>
android:<span class="variable">layout_height=</span><span class="string">"fill_parent"</span>
android:<span class="variable">background=</span><span class="string">"#111111"</span>
android:<span class="variable">orientation=</span><span class="string">"vertical"</span> &gt;

&lt;TextView
    android:<span class="variable">id=</span><span class="string">"@+id/txt_Title"</span>
    android:<span class="variable">layout_width=</span><span class="string">"wrap_content"</span>
    android:<span class="variable">layout_height=</span><span class="string">"wrap_content"</span>
    android:<span class="variable">layout_gravity=</span><span class="string">"center|top"</span>
    android:<span class="variable">text=</span><span class="string">"@string/toast_text_1"</span>
    android:<span class="variable">textColor=</span><span class="string">"#ffffff"</span>
    android:<span class="variable">textSize=</span><span class="string">"20dip"</span> &gt;
&lt;/TextView&gt;

&lt;LinearLayout
    android:<span class="variable">layout_width=</span><span class="string">"wrap_content"</span>
    android:<span class="variable">layout_height=</span><span class="string">"wrap_content"</span>
    android:<span class="variable">background=</span><span class="string">"#999999"</span>
    android:<span class="variable">orientation=</span><span class="string">"horizontal"</span> &gt;

    &lt;ImageView
        android:<span class="variable">id=</span><span class="string">"@+id/image_toast"</span>
        android:<span class="variable">layout_width=</span><span class="string">"wrap_content"</span>
        android:<span class="variable">layout_height=</span><span class="string">"wrap_content"</span>
        android:<span class="variable">layout_marginRight=</span><span class="string">"10dip"</span>
        android:<span class="variable">src=</span><span class="string">"@drawable/wallpaper_field_small"</span> &gt;
    &lt;/ImageView&gt;

    &lt;TextView
        android:<span class="variable">id=</span><span class="string">"@+id/txt_context"</span>
        android:<span class="variable">layout_width=</span><span class="string">"wrap_content"</span>
        android:<span class="variable">layout_height=</span><span class="string">"wrap_content"</span>
        android:<span class="variable">layout_gravity=</span><span class="string">"center|right"</span>
        android:<span class="variable">text=</span><span class="string">"@string/toast_text_2"</span>
        android:<span class="variable">textColor=</span><span class="string">"#ffffff"</span>
        android:<span class="variable">textSize=</span><span class="string">"15dip"</span> &gt;
    &lt;/TextView&gt;
&lt;/LinearLayout&gt;

&lt;/LinearLayout&gt;
</code></pre><p>github代码地址：<a href="https://github.com/zszdevelop/WorshipLight" target="_blank" rel="external">https://github.com/zszdevelop/WorshipLight</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/09/14/2015-9-14/" data-id="ciejpjimz000hd0b2bmv7y39j" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


    
      <article id="post-2015-9-11" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/11/2015-9-11/">2015/9/11</a>
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/2015/09/11/2015-9-11/">
    <time datetime="2015-09-11T01:02:00.000Z" itemprop="datePublished">2015-09-11</time>
  </a>
</div>
          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/09/11/2015-9-11/" data-id="ciejpjin2000id0b2wcbekqhq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


    
      <article id="post-2015-9-10" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/10/2015-9-10/">2015/9/10</a>
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/2015/09/10/2015-9-10/">
    <time datetime="2015-09-10T06:00:17.000Z" itemprop="datePublished">2015-09-10</time>
  </a>
</div>
          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="2015/9/10问题集">2015/9/10问题集</h1><h2 id="Android取得经纬度">Android取得经纬度</h2><p>从中取得经纬度。<br>记得要添加权限</p>
<pre><code>&lt;uses-permission android:<span class="property">name</span>=<span class="string">"android.permission.ACCESS_FINE_LOCATION"</span> /&gt;
</code></pre><p>-</p>
<pre><code><span class="keyword">package</span> com.zsz.develop.gpsfixdemo;

<span class="keyword">import</span> android.Manifest;
<span class="keyword">import</span> android.content.Context;
<span class="keyword">import</span> android.content.pm.PackageManager;
<span class="keyword">import</span> android.location.Address;
<span class="keyword">import</span> android.location.Geocoder;
<span class="keyword">import</span> android.location.Location;
<span class="keyword">import</span> android.location.LocationListener;
<span class="keyword">import</span> android.location.LocationManager;
<span class="keyword">import</span> android.support.v7.app.AppCompatActivity;
<span class="keyword">import</span> android.os.Bundle;
<span class="keyword">import</span> android.view.Menu;
<span class="keyword">import</span> android.view.MenuItem;
<span class="keyword">import</span> android.widget.TextView;
<span class="keyword">import</span> android.widget.Toast;

<span class="keyword">import</span> java.io.IOException;
<span class="keyword">import</span> java.net.HttpURLConnection;
<span class="keyword">import</span> java.net.URL;
<span class="keyword">import</span> java.util.List;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GPSActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>{
String latLongString;
<span class="annotation">@Override</span>
<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{
    <span class="keyword">super</span>.onCreate(savedInstanceState);
    setContentView(R.layout.activity_gps);
    init();
}

<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>{
    <span class="javadoc">/**
     *取得系统位置管理的引用，
     *getSystem这个一定要在activity里面引用
     */</span>

    LocationManager locationManager = (LocationManager) <span class="keyword">this</span>.getSystemService(Context.LOCATION_SERVICE);
    <span class="comment">//添加位置监听。Define a listener that responds to location updates</span>
    LocationListener locationListener = <span class="keyword">new</span> LocationListener() {
        <span class="annotation">@Override</span>
        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onLocationChanged</span><span class="params">(Location location)</span> </span>{
            <span class="comment">// Called when a new location is found by the network location provider.</span>
            <span class="comment">//当找到新的位置提供者</span>
            makeUseOfNewLocation(location);
        }

        <span class="annotation">@Override</span>
        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStatusChanged</span><span class="params">(String provider, <span class="keyword">int</span> status, Bundle extras)</span> </span>{

        }

        <span class="annotation">@Override</span>
        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onProviderEnabled</span><span class="params">(String provider)</span> </span>{

        }

        <span class="annotation">@Override</span>
        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onProviderDisabled</span><span class="params">(String provider)</span> </span>{

        }
    };
    <span class="comment">// 设置监听器，自动更新的最小时间为间隔N秒(1秒为1*1000，这样写主要为了方便)或最小位移变化超过N米</span>
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, <span class="number">0</span>, <span class="number">0</span>, locationListener);
}

<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">makeUseOfNewLocation</span><span class="params">(Location location)</span> </span>{
    TextView tv1;
    tv1 = (TextView) <span class="keyword">this</span>.findViewById(R.id.tv1);
    <span class="keyword">if</span> (location != <span class="keyword">null</span>) {
        <span class="keyword">double</span>  latitude = location.getLatitude();
        <span class="keyword">double</span> longitude= location.getLongitude();
        tv1.setText(<span class="string">"维度："</span> +  latitude+ <span class="string">"\n经度"</span> + longitude);
    } <span class="keyword">else</span> {
        tv1.setText(<span class="string">"无法获取地理信息"</span>);
    }
}
</code></pre><p><strong>如果还要将经纬度转化为城市</strong></p>
<pre><code><span class="keyword">package</span> com.zsz.develop.gpsfixdemo;

<span class="keyword">import</span> android.Manifest;
<span class="keyword">import</span> android.content.Context;
<span class="keyword">import</span> android.content.Intent;
<span class="keyword">import</span> android.content.pm.PackageManager;
<span class="keyword">import</span> android.location.Address;
<span class="keyword">import</span> android.location.Criteria;
<span class="keyword">import</span> android.location.Geocoder;
<span class="keyword">import</span> android.location.Location;
<span class="keyword">import</span> android.location.LocationListener;
<span class="keyword">import</span> android.location.LocationManager;
<span class="keyword">import</span> android.provider.Settings;
<span class="keyword">import</span> android.support.v7.app.AppCompatActivity;
<span class="keyword">import</span> android.os.Bundle;
<span class="keyword">import</span> android.util.Log;
<span class="keyword">import</span> android.view.Menu;
<span class="keyword">import</span> android.view.MenuItem;
<span class="keyword">import</span> android.widget.TextView;
<span class="keyword">import</span> android.widget.Toast;

<span class="keyword">import</span> java.io.IOException;
<span class="keyword">import</span> java.net.HttpURLConnection;
<span class="keyword">import</span> java.net.URL;
<span class="keyword">import</span> java.util.List;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GPSActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>{
String latLongString;
<span class="keyword">double</span>  latitude;
<span class="keyword">double</span> longitude;
<span class="annotation">@Override</span>
<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{
    <span class="keyword">super</span>.onCreate(savedInstanceState);
    setContentView(R.layout.activity_gps);
    init();
}

<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>{

    openGPSSettings();
    getLaction();

}
<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">openGPSSettings</span><span class="params">()</span> </span>{
    LocationManager alm = (LocationManager) <span class="keyword">this</span>
            .getSystemService(Context.LOCATION_SERVICE);
    <span class="keyword">if</span> (alm
            .isProviderEnabled(android.location.LocationManager.GPS_PROVIDER)) {
        Toast.makeText(<span class="keyword">this</span>, <span class="string">"GPS模块正常"</span>, Toast.LENGTH_SHORT)
                .show();
        Log.w(<span class="string">"gps "</span>, <span class="string">"正常"</span>);
        <span class="keyword">return</span>;
    }

    Toast.makeText(<span class="keyword">this</span>, <span class="string">"请开启GPS！"</span>, Toast.LENGTH_SHORT).show();
    Intent intent = <span class="keyword">new</span> Intent(Settings.ACTION_SECURITY_SETTINGS);
    startActivityForResult(intent, <span class="number">0</span>); <span class="comment">//此为设置完成后返回到获取界面</span>

}
<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">getLaction</span><span class="params">()</span></span>{
    <span class="javadoc">/**
     *取得系统位置管理的引用，
     *getSystem这个一定要在activity里面引用
     */</span>

    LocationManager locationManager = (LocationManager) <span class="keyword">this</span>.getSystemService(Context.LOCATION_SERVICE);

    String serviceName = Context.LOCATION_SERVICE;
    locationManager = (LocationManager) <span class="keyword">this</span>.getSystemService(serviceName);
    <span class="comment">// 查找到服务信息</span>
    Criteria criteria = <span class="keyword">new</span> Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE); <span class="comment">// 高精度</span>
    criteria.setAltitudeRequired(<span class="keyword">false</span>);
    criteria.setBearingRequired(<span class="keyword">false</span>);
    criteria.setCostAllowed(<span class="keyword">true</span>);
    criteria.setPowerRequirement(Criteria.POWER_LOW); <span class="comment">// 低功耗</span>

    String provider = locationManager.getBestProvider(criteria, <span class="keyword">true</span>); <span class="comment">// 获取GPS信息</span>

    <span class="comment">//添加位置监听。Define a listener that responds to location updates</span>
    LocationListener locationListener = <span class="keyword">new</span> LocationListener() {
        <span class="annotation">@Override</span>
        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onLocationChanged</span><span class="params">(Location location)</span> </span>{
            <span class="comment">// Called when a new location is found by the network location provider.</span>
            <span class="comment">//当找到新的位置提供者</span>
            makeUseOfNewLocation(location);
        }

        <span class="annotation">@Override</span>
        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStatusChanged</span><span class="params">(String provider, <span class="keyword">int</span> status, Bundle extras)</span> </span>{

        }

        <span class="annotation">@Override</span>
        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onProviderEnabled</span><span class="params">(String provider)</span> </span>{

        }

        <span class="annotation">@Override</span>
        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onProviderDisabled</span><span class="params">(String provider)</span> </span>{

        }
    };
    <span class="comment">// 设置监听器，自动更新的最小时间为间隔N秒(1秒为1*1000，这样写主要为了方便)或最小位移变化超过N米</span>
    locationManager.requestLocationUpdates(provider, <span class="number">1000</span> * <span class="number">60</span>, <span class="number">100</span>, locationListener);

}

<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">makeUseOfNewLocation</span><span class="params">(Location location)</span> </span>{
    TextView tv1;

    tv1 = (TextView) <span class="keyword">this</span>.findViewById(R.id.tv1);
    <span class="keyword">if</span> (location != <span class="keyword">null</span>) {
         latitude = location.getLatitude();
        longitude= location.getLongitude();
        tv1.setText(<span class="string">"维度："</span> +  latitude+ <span class="string">"\n经度"</span> + longitude);
    } <span class="keyword">else</span> {
        tv1.setText(<span class="string">"无法获取地理信息"</span>);
    }



    List&lt;Address&gt; addList = <span class="keyword">null</span>;
    Geocoder ge = <span class="keyword">new</span> Geocoder(<span class="keyword">this</span>);
    <span class="keyword">try</span> {
        addList = ge.getFromLocation(latitude, longitude, <span class="number">2</span>);
        tv1.append(addList+<span class="string">""</span>);
    } <span class="keyword">catch</span> (IOException e) {
        <span class="comment">// TODO Auto-generated catch block</span>
        e.printStackTrace();
    }
    <span class="keyword">if</span>(addList!=<span class="keyword">null</span> &amp;&amp; addList.size()&gt;<span class="number">0</span>){
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;addList.size(); i++){
            Address ad = addList.get(i);
            latLongString += <span class="string">"\n"</span>;
            latLongString += ad.getCountryName() + <span class="string">";"</span> + ad.getLocality();
            tv1.append(<span class="string">"您当前的位置是:\n"</span> + latLongString);
        }
    }

}



}
</code></pre><h2 id="Location服务之Geocoder">Location服务之Geocoder</h2><p>提到Android基于位置的服务，就不得不提android.location包，</p>
<p>location包提供了很便捷的API来实现基于位置的服务。主要包括Geocoder和LocationManager。今天就先来介绍一下Geocoder。</p>
<p>Geocoder可以在街道地址和经纬度地图坐标之间进行转换。它提供了对两种地理编码功能的访问：</p>
<p><strong>Forward Geocoding(前向地理编码)</strong>：查找某个地址的经纬度</p>
<p><strong>Reverse Geocoding(反向地理编码)</strong>：查找一个给定的经纬度所对应的街道地址。</p>
<h2 id="Location获取地理位置信息（中）Criteria类的简单使用">Location获取地理位置信息（中）Criteria类的简单使用</h2><p>在使用android lcoation的时候，可能不希望自己去硬性的选择是GPS服务还是NETWORK服务，可能是我们考虑的因素有很多，自己很难决定，Android SDK提供了一个类Criteria，直译为标准。</p>
<p>//翻译：返回满足给定的criteria(标准)的最佳provider，（前面一篇文章提到过两种重要provider的区别）。只有当provider权限允许的时候才会返回，如果几个provider均满足criteria设定的标准，最贴近标准的provider将会被返回。如果没有provider满足，标准将按照下面的序列放宽松。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/09/10/2015-9-10/" data-id="ciejpjin5000jd0b2ak3d5ky3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


    
      <article id="post-2015-9-9-4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/09/2015-9-9-4/">2015/9/9/4</a>
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/2015/09/09/2015-9-9-4/">
    <time datetime="2015-09-09T09:46:13.000Z" itemprop="datePublished">2015-09-09</time>
  </a>
</div>
          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="android_定位的几种方式介绍">android 定位的几种方式介绍</h1><p>android 定位一般有四种方法，这四种方式分别是：GPS定位，WIFI定准，基站定位，AGPS定位，</p>
<h2 id="GPS定位">GPS定位</h2><p>（1） Android GPS：需要GPS硬件支持，直接和卫星交互来获取当前经纬度，这种方式需要手机支持GPS模块（现在大部分的智能机应该都有了）。通过GPS方式准确度是最高的，但是它的缺点也非常明显：1，比较耗电；2，绝大部分用户默认不开启GPS模块；3，从GPS模块启动到获取第一次定位数据，可能需要比较长的时间；4，室内几乎无法使用。这其中，缺点2,3都是比较致命的。需要指出的是，GPS走的是卫星通信的通道，在没有网络连接的情况下也能用。要实用Adnroid平台的GPS设备，首先需要添加上权限，所以需要添加如下权限：</p>
<pre><code>uses-permission android:name= android<span class="class">.permission</span><span class="class">.ACCESS_FINE_LOCATION</span>   /uses-permission
</code></pre><p><strong>简单的实例</strong></p>
<p>要先判断GPS是否已经开启，再去得到他。</p>
<pre><code>package com.zsz.develop.gpsdemo;

<span class="keyword">import</span> android.Manifest;
<span class="keyword">import</span> android.content.Context;
<span class="keyword">import</span> android.content.Intent;
<span class="keyword">import</span> android.content.pm.PackageManager;
<span class="keyword">import</span> android.location.Criteria;
<span class="keyword">import</span> android.location.Location;
<span class="keyword">import</span> android.location.LocationManager;
<span class="keyword">import</span> android.provider.Settings;
<span class="keyword">import</span> android.support.v7.app.AppCompatActivity;
<span class="keyword">import</span> android.os.Bundle;
<span class="keyword">import</span> android.view.Menu;
<span class="keyword">import</span> android.view.MenuItem;
<span class="keyword">import</span> android.widget.TextView;
<span class="keyword">import</span> android.widget.Toast;

public <span class="class"><span class="keyword">class</span> <span class="title">GPSActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>{


@Override
protected <span class="keyword">void</span> onCreate(Bundle savedInstanceState) {
    <span class="keyword">super</span>.onCreate(savedInstanceState);
    setContentView(R.layout.activity_gps);
    openGPSSettings();
    getLocation();
}


private <span class="keyword">void</span> openGPSSettings() {
    LocationManager alm = (LocationManager) <span class="keyword">this</span>
            .getSystemService(Context.LOCATION_SERVICE);
    <span class="keyword">if</span> (alm
            .isProviderEnabled(android.location.LocationManager.GPS_PROVIDER)) {
        Toast.makeText(<span class="keyword">this</span>, <span class="string">"GPS模块正常"</span>, Toast.LENGTH_SHORT)
                .show();
        <span class="keyword">return</span>;
    }

    Toast.makeText(<span class="keyword">this</span>, <span class="string">"请开启GPS！"</span>, Toast.LENGTH_SHORT).show();
    Intent intent = <span class="keyword">new</span> Intent(Settings.ACTION_SECURITY_SETTINGS);
    startActivityForResult(intent, <span class="number">0</span>); <span class="comment">//此为设置完成后返回到获取界面</span>

}

private <span class="keyword">void</span> getLocation() {
    <span class="comment">// 获取位置管理服务</span>
    LocationManager locationManager;
    <span class="built_in">String</span> serviceName = Context.LOCATION_SERVICE;
    locationManager = (LocationManager) <span class="keyword">this</span>.getSystemService(serviceName);
    <span class="comment">// 查找到服务信息</span>
    Criteria criteria = <span class="keyword">new</span> Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE); <span class="comment">// 高精度</span>
    criteria.setAltitudeRequired(<span class="literal">false</span>);
    criteria.setBearingRequired(<span class="literal">false</span>);
    criteria.setCostAllowed(<span class="literal">true</span>);
    criteria.setPowerRequirement(Criteria.POWER_LOW); <span class="comment">// 低功耗</span>

    <span class="built_in">String</span> provider = locationManager.getBestProvider(criteria, <span class="literal">true</span>); <span class="comment">// 获取GPS信息</span>
    <span class="keyword">if</span> (checkSelfPermission(Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; checkSelfPermission(Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
        <span class="comment">// TODO: Consider calling</span>
        <span class="comment">//    public void requestPermissions(@NonNull String[] permissions, int requestCode)</span>
        <span class="comment">// here to request the missing permissions, and then overriding</span>
        <span class="comment">//   public void onRequestPermissionsResult(int requestCode, String[] permissions,</span>
        <span class="comment">//                                          int[] grantResults)</span>
        <span class="comment">// to handle the case where the user grants the permission. See the documentation</span>
        <span class="comment">// for Activity#requestPermissions for more details.</span>
        <span class="keyword">return</span>;
    }
    Location location = locationManager.getLastKnownLocation(provider); <span class="comment">// 通过GPS获取位置</span>
    updateToNewLocation(location);
    <span class="comment">// 设置监听器，自动更新的最小时间为间隔N秒(1秒为1*1000，这样写主要为了方便)或最小位移变化超过N米</span>
<span class="comment">//        locationManager.requestLocationUpdates(provider, 100 * 1000, 500,</span>
<span class="comment">//                locationListener);</span>
}
private <span class="keyword">void</span> updateToNewLocation(Location location) {

    TextView tv1;
    tv1 = (TextView) <span class="keyword">this</span>.findViewById(R.id.tv1);
    <span class="keyword">if</span> (location != <span class="literal">null</span>) {
        double  latitude = location.getLatitude();
        double longitude= location.getLongitude();
        tv1.setText(<span class="string">"维度："</span> +  latitude+ <span class="string">"\n经度"</span> + longitude);
    } <span class="keyword">else</span> {
        tv1.setText(<span class="string">"无法获取地理信息"</span>);
    }

}
}
</code></pre><h2 id="（2)Android_基站定位：">（2)Android 基站定位：</h2><p>Android 基站定位只要明白了基站/WIFI定位的原理，自己实现基站/WIFI定位其实不难。</p>
<p>基站定位一般有几种，</p>
<p>第一种是利用手机附近的三个基站进行三角定位，由于每个基站的位置是固定的，利用电磁波在这三个基站间中转所需要时间来算出手机所在的坐标；</p>
<p>第二种则是利用获取最近的基站的信息，其中包括基站 id，location area code、mobile country code、mobile network code和信号强度，将这些数据发送到google的定位web服务里，就能拿到当前所在的位置信息，误差一般在几十米到几百米之内。其中信号强度这个数据很重要，这里笔者就不多做解释了，</p>
<p>直接给出一个文章，这个文章写的非常好，<a href="http://www.cnblogs.com/rayee/archive/2012/02/02/2336101.html" target="_blank" rel="external">http://www.cnblogs.com/rayee/archive/2012/02/02/2336101.html</a></p>
<h2 id="（3）Android_Wifi定位_##：">（3）Android Wifi定位 ##：</h2><p>根据一个固定的WifiMAC地址，通过收集到的该Wifi热点的位置，然后访问网络上的定位服务以获得经纬度坐标。因为它和基站定位其实都需要使用网络，所以在Android也统称为Network方式。</p>
<h3 id="（3-1）而WIFI定位与基站定位的结合，">（3.1）而WIFI定位与基站定位的结合，</h3><p>笔者也在网上找到一个很好的文章，笔者对此就不做任何解释，直接给出网址：                                             <a href="http://www.cnblogs.com/coffeegg/archive/2011/10/01/2197129.html" target="_blank" rel="external">http://www.cnblogs.com/coffeegg/archive/2011/10/01/2197129.html</a> </p>
<h2 id="（4）AGPS定位：">（4）AGPS定位：</h2><p>AGPS（AssistedGPS：辅助全球卫星定位系统）是结合GSM或GPRS与传统卫星定位，利用基地台代送辅助卫星信息，以缩减GPS芯片获取卫星信号的延迟时间，受遮盖的室内也能借基地台讯号弥补，减轻GPS芯片对卫星的依赖度。和纯GPS、基地台三角定位比较，AGPS能提供范围更广、更省电、速度更快的定位服务，理想误差范围在10公尺以内，日本和美国都已经成熟运用AGPS于LBS服务（Location Based Service，基于位置的服务）。AGPS技术是一种结合了网络基站信息和GPS信息对移动台进行定位的技术，可以在GSM/GPRS、WCDMA和CDMA2000网络中使进行用。该技术需要在手机内增加GPS接收机模块，并改造手机的天线，同时要在移动网络上加建位置服务器、差分GPS基准站等设备。AGPS解决方案的优势主要体现在其定位精度上，在室外等空旷地区，其精度在正常的GPS工作环境下，可以达到10米左右，堪称目前定位精度最高的一种定位技术。该技术的另一优点为：首次捕获GPS信号的时间一般仅需几秒，不像GPS的首次捕获时间可能要2～3分钟          </p>
<h1 id="感谢原文作者：http://www-cnblogs-com/cuihongyu3503319/p/3863867-html">感谢原文作者：<a href="http://www.cnblogs.com/cuihongyu3503319/p/3863867.html" target="_blank" rel="external">http://www.cnblogs.com/cuihongyu3503319/p/3863867.html</a></h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/09/09/2015-9-9-4/" data-id="ciejpjili0003d0b25okyk60a" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


    
      <article id="post-2015-9-9-3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/09/2015-9-9-3/">2015/9/9/3</a>
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/2015/09/09/2015-9-9-3/">
    <time datetime="2015-09-09T07:30:20.000Z" itemprop="datePublished">2015-09-09</time>
  </a>
</div>
          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="startActivityForResult与startActivity的不同之处">startActivityForResult与startActivity的不同之处</h2><p>1、startActivity( )<br>仅仅是跳转到目标页面，若是想跳回当前页面，则必须再使用一次startActivity( )。<br>2、startActivityForResult( )<br>可以一次性完成这项任务，当程序执行到这段代码的时候，假若从T1Activity跳转到下一个T2Activity，而当这个T2Activity调用了finish()方法以后，程序会自动跳转回T1Activity，并调用前一个T1Activity中的onActivityResult( )方法。</p>
<pre><code>Intent toChooseCityActivity=new Intent<span class="list">(<span class="keyword">this</span>,ChooseCityActivity.class)</span><span class="comment">;</span>
            startActivityForResult<span class="list">(<span class="keyword">toChooseCityActivity</span>, <span class="number">1</span>)</span><span class="comment">;</span>
</code></pre><p>startActivityForResult( )第一个Intent，第二个是个标识，但一定要&gt;=0。</p>
<p><strong>2.重写onActivityResult方法，用来接收B回传的数据。</strong></p>
<pre><code> <span class="annotation">@Override</span>
<span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>{
    <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);
    <span class="keyword">if</span> (resultCode == <span class="number">2</span>){
        <span class="keyword">if</span> (data != <span class="keyword">null</span>){
            tvCity.setText(data.getStringExtra(<span class="string">"city"</span>));
        }
    }
</code></pre><p><strong>3.在B中回传数据时采用setResult方法，并且之后要调用finish方法。</strong></p>
<pre><code><span class="function">setResult</span>(RESULT_OK, intent); <span class="comment">//intent为A传来的带有Bundle的intent，当然也可以自己定义新的Bundle</span>
<span class="function">finish</span>();<span class="comment">//此处一定要调用finish()方法</span>
</code></pre><p>Android activity的setResult()在什么时候调用(重点也是难点)</p>
<p>如果在startActivityForResult起来的Activity里面设置setResult,结果并不会马上返回给parent的Activity,只有当前Activity被finish,结果才会被发送给parent的onActivityResult去处理!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/09/09/2015-9-9-3/" data-id="ciejpjill0004d0b283z2pm6h" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


    
      <article id="post-2015-9-9-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/09/2015-9-9-2/">2015/9/9-2</a>
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/2015/09/09/2015-9-9-2/">
    <time datetime="2015-09-09T01:13:02.000Z" itemprop="datePublished">2015-09-09</time>
  </a>
</div>
          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="2015/9/9问题集">2015/9/9问题集</h1><h2 id="Android_带清除功能的输入框控件ClearEditText,仿IOS的输入框">Android 带清除功能的输入框控件ClearEditText,仿IOS的输入框</h2><p> 出处<a href="http://blog.csdn.net/xiaanming/article/details/11066685" target="_blank" rel="external">http://blog.csdn.net/xiaanming/article/details/11066685</a></p>
<p>就是在Android系统的输入框右边加入一个小图标，点击小图标可以清除输入框里面的内容，IOS上面直接设置某个属性就可以实现这一功能，但是Android原生EditText不具备此功能，所以要想实现这一功能我们需要重写EditText，接下来就带大家来实现这一小小的功能<br>我们知道，我们可以为我们的输入框在上下左右设置图片，所以我们可以利用属性android:drawableRight设置我们的删除小图标</p>
<p>如果我们能为右边的图片设置监听，点击右边的图片清除输入框的内容并隐藏删除图标，这样子这个小功能就迎刃而解了，可是Android并没有给允许我们给右边小图标加监听的功能，这时候你是不是发现这条路走不通呢，其实不是，我们可能模拟点击事件，用输入框的的onTouchEvent()方法来模拟，<br>当我们触摸抬起（就是ACTION_UP的时候）的范围  大于输入框左侧到清除图标左侧的距离，小与输入框左侧到清除图片右侧的距离，我们则认为是点击清除图片，当然我这里没有考虑竖直方向，只要给清除小图标就上了监听，其他的就都好处理了</p>
<p>ClearEditText的代码</p>
<pre><code><span class="keyword">package</span> com.zsz.develop.clearedittextdemo;

<span class="keyword">import</span> android.content.Context;
<span class="keyword">import</span> android.graphics.drawable.Drawable;
<span class="keyword">import</span> android.text.Editable;
<span class="keyword">import</span> android.text.TextWatcher;
<span class="keyword">import</span> android.util.AttributeSet;
<span class="keyword">import</span> android.view.MotionEvent;
<span class="keyword">import</span> android.view.View;
<span class="keyword">import</span> android.view.View.OnFocusChangeListener;
<span class="keyword">import</span> android.view.animation.Animation;
<span class="keyword">import</span> android.view.animation.CycleInterpolator;
<span class="keyword">import</span> android.view.animation.TranslateAnimation;
<span class="keyword">import</span> android.widget.EditText;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClearEditText</span> <span class="keyword">extends</span> <span class="title">EditText</span> <span class="keyword">implements</span>  
    <span class="title">OnFocusChangeListener</span>, <span class="title">TextWatcher</span> </span>{ 

<span class="keyword">private</span> Drawable mClearDrawable; 

<span class="function"><span class="keyword">public</span> <span class="title">ClearEditText</span><span class="params">(Context context)</span> </span>{ 
    <span class="keyword">this</span>(context, <span class="keyword">null</span>); 
} 

<span class="function"><span class="keyword">public</span> <span class="title">ClearEditText</span><span class="params">(Context context, AttributeSet attrs)</span> </span>{
    <span class="comment">//这里构造方法也很重要，不加这个很多属性不能再XML里面定义  </span>
    <span class="keyword">this</span>(context, attrs, android.R.attr.editTextStyle);
} 

<span class="function"><span class="keyword">public</span> <span class="title">ClearEditText</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyle)</span> </span>{
    <span class="keyword">super</span>(context, attrs, defStyle);
    init();
}


<span class="keyword">private</span> <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>{ 
    mClearDrawable = getCompoundDrawables()[<span class="number">2</span>];
    <span class="keyword">if</span> (mClearDrawable == <span class="keyword">null</span>) { 
        mClearDrawable = getResources() 
                .getDrawable(R.drawable.emotionstore_progresscancelbtn);
    } 
    mClearDrawable.setBounds(<span class="number">0</span>, <span class="number">0</span>, mClearDrawable.getIntrinsicWidth(), mClearDrawable.getIntrinsicHeight());
    <span class="comment">//默认设置隐藏图标</span>
    setClearIconVisible(<span class="keyword">false</span>);
    <span class="comment">//设置焦点改变的监听</span>
    setOnFocusChangeListener(<span class="keyword">this</span>);
    <span class="comment">//设置输入框里面内容发生改变的监听 </span>
    addTextChangedListener(<span class="keyword">this</span>); 
}
<span class="javadoc">/**
 * 因为我们不能直接给EditText设置点击事件，所以我们用记住我们按下的位置来模拟点击事件
 * 当我们按下的位置 在  EditText的宽度 - 图标到控件右边的间距 - 图标的宽度  和
 * EditText的宽度 - 图标到控件右边的间距之间我们就算点击了图标，竖直方向就没有考虑
 */</span>

<span class="annotation">@Override</span> 
<span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>{ 
    <span class="keyword">if</span> (getCompoundDrawables()[<span class="number">2</span>] != <span class="keyword">null</span>) { 
        <span class="keyword">if</span> (event.getAction() == MotionEvent.ACTION_UP) { 
            <span class="keyword">boolean</span> touchable = event.getX() &gt; (getWidth() 
                    - getPaddingRight() - mClearDrawable.getIntrinsicWidth()) 
                    &amp;&amp; (event.getX() &lt; ((getWidth() - getPaddingRight())));
            <span class="keyword">if</span> (touchable) { 
                <span class="keyword">this</span>.setText(<span class="string">""</span>); 
            } 
        } 
    } 

    <span class="function"><span class="keyword">return</span> <span class="keyword">super</span>.<span class="title">onTouchEvent</span><span class="params">(event)</span></span>; 
}
<span class="javadoc">/**
 * 当ClearEditText焦点发生变化的时候，判断里面字符串长度设置清除图标的显示与隐藏
 */</span>

<span class="annotation">@Override</span> 
<span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onFocusChange</span><span class="params">(View v, <span class="keyword">boolean</span> hasFocus)</span> </span>{ 
    <span class="keyword">if</span> (hasFocus) { 
        setClearIconVisible(getText().length() &gt; <span class="number">0</span>); 
    } <span class="keyword">else</span> { 
        setClearIconVisible(<span class="keyword">false</span>); 
    } 
}

<span class="javadoc">/**
 * 设置清除图标的显示与隐藏，调用setCompoundDrawables为EditText绘制上去
 *<span class="javadoctag"> @param</span> visible
 */</span>

<span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">setClearIconVisible</span><span class="params">(<span class="keyword">boolean</span> visible)</span> </span>{ 
    Drawable right = visible ? mClearDrawable : <span class="keyword">null</span>; 
    setCompoundDrawables(getCompoundDrawables()[<span class="number">0</span>], 
            getCompoundDrawables()[<span class="number">1</span>], right, getCompoundDrawables()[<span class="number">3</span>]); 
}

<span class="javadoc">/**
 * 当输入框里面内容发生变化的时候回调的方法
 */</span>
<span class="annotation">@Override</span>
<span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onTextChanged</span><span class="params">(CharSequence s, <span class="keyword">int</span> start, <span class="keyword">int</span> count, 
        <span class="keyword">int</span> after)</span> </span>{ 
    setClearIconVisible(s.length() &gt; <span class="number">0</span>); 
} 

<span class="annotation">@Override</span> 
<span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">beforeTextChanged</span><span class="params">(CharSequence s, <span class="keyword">int</span> start, <span class="keyword">int</span> count, 
        <span class="keyword">int</span> after)</span> </span>{ 

} 

<span class="annotation">@Override</span> 
<span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">afterTextChanged</span><span class="params">(Editable s)</span> </span>{ 

}


<span class="javadoc">/**
 * 设置晃动动画
 */</span>
<span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">setShakeAnimation</span><span class="params">()</span></span>{
    <span class="keyword">this</span>.setAnimation(shakeAnimation(<span class="number">50</span>));
}

<span class="javadoc">/**
 * 晃动动画
 *<span class="javadoctag"> @param</span> counts 1秒钟晃动多少下
 *<span class="javadoctag"> @return</span>
 */</span>

<span class="keyword">public</span> <span class="keyword">static</span> <span class="function">Animation <span class="title">shakeAnimation</span><span class="params">(<span class="keyword">int</span> counts)</span></span>{
    Animation translateAnimation = <span class="keyword">new</span> TranslateAnimation(<span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">0</span>);
    translateAnimation.setInterpolator(<span class="keyword">new</span> CycleInterpolator(counts));
    translateAnimation.setDuration(<span class="number">1000</span>);
    <span class="keyword">return</span> translateAnimation;
}


}
</code></pre><p>xml的设置</p>
<pre><code>&lt;RelativeLayout xmlns:<span class="variable">android=</span><span class="string">"http://schemas.android.com/apk/res/android"</span>
xmlns:<span class="variable">tools=</span><span class="string">"http://schemas.android.com/tools"</span>
android:<span class="variable">layout_width=</span><span class="string">"match_parent"</span>
android:<span class="variable">layout_height=</span><span class="string">"match_parent"</span>
&gt;


&lt;com.zsz.develop.clearedittextdemo.ClearEditText
    android:<span class="variable">id=</span><span class="string">"@+id/filter_edit"</span>
    android:<span class="variable">layout_marginTop=</span><span class="string">"5dip"</span>
    android:<span class="variable">layout_width=</span><span class="string">"fill_parent"</span>
    android:<span class="variable">layout_height=</span><span class="string">"wrap_content"</span>

    android:<span class="variable">drawableLeft=</span><span class="string">"@drawable/search_bar_icon_normal"</span>
    android:<span class="variable">hint=</span><span class="string">"dd"</span>
    android:<span class="variable">singleLine=</span><span class="string">"true"</span>
    android:<span class="variable">textSize=</span><span class="string">"15.0dip"</span> /&gt;
&lt;/RelativeLayout&gt;
</code></pre><h2 id="ListView的setSelection()和setSelectionFromTop()联系">ListView的setSelection()和setSelectionFromTop()联系</h2><p>通常，app中的数据都是以ListView的形式展示的。默认地，把“新”数据添加到数据列表的尾部。<br>但是，如果是IM类型的app，比如查看历史消息这个模块。新数据并不是插到数据列表的尾部，而是插到数据列表的头部。<br>要实现比较好的用户体验，需要保持当前的ListView的位置。换句话说，如果我们能够随心所欲地指定ListView滚动的位置，那么这个问题就迎刃而解。<br>在ListView中，有一个setSelectionFromTop()方法</p>
<p>他的源码如下：</p>
<pre><code><span class="comment">/** 
 * Sets the selected item and positions the selection y pixels from the top edge 
 * of the ListView. (If in touch mode, the item will not be selected but it will 
 * still be positioned appropriately.) 
 * 
 * @param position Index (starting at 0) of the data item to be selected. 
 * @param y The distance from the top edge of the ListView (plus padding) that the 
 *        item will be positioned. 
 */</span>  
public void setSelectionFromTop(int position, int y) {  
<span class="keyword">if</span> (<span class="variable">mAdapter =</span>= <span class="constant">null</span>) {  
    return;  
}  

<span class="keyword">if</span> (!isInTouchMode()) {  
    <span class="variable">position =</span> lookForSelectablePosition(position, <span class="constant">true</span>);  
    <span class="keyword">if</span> (position &gt;= <span class="number">0</span>) {  
        setNextSelectedPositionInt(position);  
    }  
} <span class="keyword">else</span> {  
    <span class="variable">mResurrectToPosition =</span> position;  
}  

<span class="keyword">if</span> (position &gt;= <span class="number">0</span>) {  
    <span class="variable">mLayoutMode =</span> LAYOUT_SPECIFIC;  
    <span class="variable">mSpecificTop =</span> mListPadding.top + y;  

    <span class="keyword">if</span> (mNeedSync) {  
        <span class="variable">mSyncPosition =</span> position;  
        <span class="variable">mSyncRowId =</span> mAdapter.getItemId(position);  
    }  

    requestLayout();  
}  
}  
</code></pre><p>从上面的代码可以得知，setSelectionFromTop()的作用是设置ListView选中的位置，同时在Y轴设置一个偏移量（padding值）。<br>ListView还有一个方法叫setSelection()，传入一个index整型数值，就可以让ListView定位到指定Item的位置。<br>这两个方法有什么区别呢？看一下setSelection()的具体实现，代码如下：</p>
<pre><code>/** 
 * Sets <span class="keyword">the</span> currently selected <span class="property">item</span>. If <span class="keyword">in</span> touch mode, <span class="keyword">the</span> <span class="property">item</span> will <span class="keyword">not</span> be selected 
 * <span class="keyword">but</span> <span class="keyword">it</span> will still be positioned appropriately. If <span class="keyword">the</span> specified selection position 
 * <span class="keyword">is</span> <span class="keyword">less than</span> <span class="number">0</span>, <span class="keyword">then</span> <span class="keyword">the</span> <span class="property">item</span> <span class="keyword">at</span> position <span class="number">0</span> will be selected. 
 * 
 * @param position Index (starting <span class="keyword">at</span> <span class="number">0</span>) <span class="keyword">of</span> <span class="keyword">the</span> data <span class="property">item</span> <span class="keyword">to</span> be selected. 
 */  
@Override  
public void setSelection(int position) {  
    setSelectionFromTop(position, <span class="number">0</span>);  
}  
</code></pre><p>原来，setSelection()内部就是调用了setSelectionFromTop()，只不过是Y轴的偏移量是0而已。<br>现在应该对setSelection()和setSelectionFromTop()有了更深刻的认识了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/09/09/2015-9-9-2/" data-id="ciejpjilv0005d0b26d02z8a2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


    
      <article id="post-2015-9-9" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/08/2015-9-9/">2015/9/9</a>
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/2015/09/08/2015-9-9/">
    <time datetime="2015-09-08T11:10:07.000Z" itemprop="datePublished">2015-09-08</time>
  </a>
</div>
          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="2015/9/9日">2015/9/9日</h1><p><a href="http://www.jb51.net/article/16829.htm" target="_blank" rel="external">http://www.jb51.net/article/16829.htm</a></p>
<h2 id="Java正则表达式">Java正则表达式</h2><h3 id="基础知识">基础知识</h3><p>我们先从简单的开始。假设你要搜索一个包含字符“cat”的字符串，搜索用的正则表达式就是“cat”。如果搜索对大小写不敏感，单词“catalog”、“Catherine”、“sophisticated”都可以匹配。</p>
<p><strong>1.1 句点符号</strong></p>
<p>假设你在玩英文拼字游戏，想要找出三个字母的单词，而且这些单词必须以“t”字母开头，以“n”字母结束。另外，假设有一本英文字典，你可以用正则表达式搜索它的全部内容。要构造出这个正则表达式，你可以使用一个通配符——句点符号“.”。这样，完整的表达式就是“t.n”，它匹配“tan”、“ten”、“tin”和“ton”，还匹配“t#n”、“tpn”甚至“t n”，还有其他许多无意义的组合。这是因为句点符号匹配所有字符，包括空格、Tab字符甚至换行符：</p>
<p><strong>1.2 方括号符号</strong></p>
<p>为了解决句点符号匹配范围过于广泛这一问题，你可以在方括号（“[]”）里面指定看来有意义的字符。此时，只有方括号里面指定的字符才参与匹配。也就是说，正则表达式“t[aeio]n”只匹配“tan”、“Ten”、“tin”和“ton”。但“Toon”不匹配，因为在方括号之内你只能匹配单个字符：</p>
<p><strong>1.3 “或”符号</strong></p>
<p>如果除了上面匹配的所有单词之外，你还想要匹配“toon”，那么，你可以使用“|”操作符。“|”操作符的基本意义就是“或”运算。要匹配“toon”，使用“t(a|e|i|o|oo)n”正则表达式。这里不能使用方扩号，因为方括号只允许匹配单个字符；这里必须使用圆括号“()”。圆括号还可以用来分组，具体请参见后面介绍。</p>
<p>1.4 表示匹配次数的符号<br>表一显示了表示匹配次数的符号，这些符号用来确定紧靠该符号左边的符号出现的次数：</p>
<h2 id="Java中正则Matcher类的matches()、lookAt()和find()的区别">Java中正则Matcher类的matches()、lookAt()和find()的区别</h2><p>在Matcher类中有matches、lookingAt和find都是匹配目标的方法，但容易混淆，整理它们的区别如下：</p>
<p>matches:整个匹配，只有整个字符序列完全匹配成功，才返回True，否则返回False。但如果前部分匹配成功，将移动下次匹配的位置。</p>
<p>lookingAt:部分匹配，总是从第一个字符进行匹配,匹配成功了不再继续匹配，匹配失败了,也不继续匹配。</p>
<p>find:部分匹配，从当前位置开始匹配，找到一个匹配的子串，将移动下次匹配的位置。</p>
<p>reset:给当前的Matcher对象配上个新的目标，目标是就该方法的参数；如果不给参数，reset会把Matcher设到当前字符串的开始处。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/09/08/2015-9-9/" data-id="ciejpjile0002d0b2difeggak" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


    
      <article id="post-2015-9-8-6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/08/2015-9-8-6/">2015/9/8-6</a>
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/2015/09/08/2015-9-8-6/">
    <time datetime="2015-09-08T09:20:31.000Z" itemprop="datePublished">2015-09-08</time>
  </a>
</div>
          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="实现接口Comparator排序">实现接口Comparator排序</h1><p>int compare(Object o1, Object o2) 返回一个基本类型的整型，返回负数表示o1 小于o2，返回0 表示o1和o2相等，返回正数表示o1大于o2。</p>
<h2 id="Java_String-compareTo()方法">Java String.compareTo()方法</h2><p>Java String.compareTo()方法用法实例教程, 此方法如果这个字符串是等参数字符串那么​返回值0，如果这个字符串是按字典顺序小于字符串参数那么返回小于0的值，如果此字符串是按字典顺序大于字符串参数那么一个大于0的值</p>
<h2 id="简单使用">简单使用</h2><pre><code><span class="keyword">package</span> com.zsz.develop.sortlistdemo;

<span class="keyword">import</span> java.util.Comparator;

<span class="javadoc">/**
 * 
 *<span class="javadoctag"> @author</span> xiaanming
 *
 */</span>
<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PinyinComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">SortModel</span>&gt; </span>{

<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(SortModel o1, SortModel o2)</span> </span>{
    <span class="comment">//这两个是不同的啊，一个是ol等于@，一个是ol等于#。对象就不一样了</span>
    <span class="comment">//忘记了这是if语句啊！！！第一个if为真就不会再执行了。</span>
    <span class="comment">//排个序。</span>
    <span class="keyword">if</span> (o1.getSortLetters().equals(<span class="string">"@"</span>) || o2.getSortLetters().equals(<span class="string">"#"</span>)) {
        <span class="keyword">return</span> -<span class="number">1</span>;
    } <span class="function"><span class="keyword">else</span> <span class="title">if</span> <span class="params">(o1.getSortLetters()</span>.<span class="title">equals</span><span class="params">(<span class="string">"#"</span>)</span> || o2.<span class="title">getSortLetters</span><span class="params">()</span>.<span class="title">equals</span><span class="params">(<span class="string">"@"</span>)</span>) </span>{
        <span class="keyword">return</span> <span class="number">1</span>;
    } <span class="keyword">else</span> {
        <span class="keyword">return</span> o1.getSortLetters().compareTo(o2.getSortLetters());
    }
}

}
</code></pre><h2 id="java中Collections-sort排序">java中Collections.sort排序</h2><p>Comparator是个接口，可重写compare()及equals()这两个方法,用于比价功能；如果是null的话，就是使用元素的默认顺序，如a,b,c,d,e,f,g，就是a,b,c,d,e,f,g这样，当然数字也是这样的。<br>compare（a,b）方法:根据第一个参数小于、等于或大于第二个参数分别返回负整数、零或正整数。<br>equals（obj）方法：仅当指定的对象也是一个 Comparator，并且强行实施与此 Comparator 相同的排序时才返回 true。<br>Collections.sort(list, new PriceComparator());的第二个参数返回一个int型的值，就相当于一个标志，告诉sort方法按什么顺序来对list进行排序。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/09/08/2015-9-8-6/" data-id="ciejpjim30007d0b2a69wc3og" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


    
      <article id="post-2015-9-8-5" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/08/2015-9-8-5/">2015/9/8-5</a>
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/2015/09/08/2015-9-8-5/">
    <time datetime="2015-09-08T08:13:14.000Z" itemprop="datePublished">2015-09-08</time>
  </a>
</div>
          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Android事件传递机制(dispatchTouchEvent、onInterceptTouchEvent、onTouchEvent)">Android事件传递机制(dispatchTouchEvent、onInterceptTouchEvent、onTouchEvent)</h1><p>Android中的事件类型分为按键事件和屏幕触摸事件，Touch事件是屏幕触摸事件的基础事件，有必要对它进行深入的了解。</p>
<p><strong>View即普通的控件</strong>，没有子布局的，如Button、TextView.</p>
<p> <strong>ViewGroup继承自View</strong>，表示可以有子控件，如Linearlayout、Listview这些。</p>
<h2 id="事件即MotionEvent，最重要的有3个:">事件即MotionEvent，最重要的有3个:</h2><ul>
<li>(1)MotionEvent.ACTION_DOWN  按下View，是所有事件的开始</li>
<li>(2)MotionEvent.ACTION_MOVE   滑动事件</li>
<li>(3)MotionEvent.ACTION_UP       与down对应，表示抬起</li>
</ul>
<h2 id="明确事件传递机制的最终目的都是为了触发执行View的点击监听和触摸监听:">明确事件传递机制的最终目的都是为了触发执行View的点击监听和触摸监听:</h2><pre><code>******.setOnClickListener(new <span class="type">View</span>.<span class="type">OnClickListener</span>() {

    @<span class="type">Override</span>
    public <span class="type">void</span> onClick(<span class="type">View</span> v) {
        // <span class="type">TODO</span> <span class="type">Auto</span>-generated <span class="keyword">method</span> stub
        <span class="type">Log</span>.i(tag, <span class="string">"testLinelayout---onClick..."</span>);
    }
});

*******.setOnTouchListener(new <span class="type">View</span>.<span class="type">OnTouchListener</span>() {

    @<span class="type">Override</span>
    public boolean onTouch(<span class="type">View</span> v, <span class="type">MotionEvent</span> event) {
        // <span class="type">TODO</span> <span class="type">Auto</span>-generated <span class="keyword">method</span> stub

        <span class="keyword">return</span> <span class="literal">false</span>;
    }
});
</code></pre><p>我们简称为onClick监听和onTouch监听，一般程序会注册这两个监听。从上面可以看到，onTouch监听里默认return false。不要小看了这个return false，后面可以看到它有大用。</p>
<p>对于View来说，事件传递机制有两个函数：dispatchTouchEvent负责分发事件，在dispatch<em>*</em>里又会调用onTouchEvent表示执行事件，或者说消费事件，</p>
<h2 id="总结">总结</h2><p>1、事件入口是dispatchTouchEvent(),它会先执行注册的onTouch监听,如果一切顺利的话，接着执行onTouchEvent，在onTouchEvent里会执行onClick监听。</p>
<p>2、无论是dispatchTouchEvent还是onTouchEvent，如果返回true表示这个事件已经被消费、处理了，不再往下传了。在dispathTouchEvent的源码里可以看到，如果onTouchEvent返回了true，那么它也返回true。如果dispatch<em>*</em>在执行onTouch监听的时候，onTouch返回了true，那么它也返回true，这个事件提前被onTouch消费掉了。就不再执行onTouchEvent了，更别说onClick监听了。</p>
<p>3、我们通常在onTouch监听了设置图片一旦被触摸就改变它的背景、透明度之类的，这个onTouch表示事件的时机。而在onClick监听了去具体干某些事。</p>
<h2 id="在自定义的View里面添加再设置一个外加View">在自定义的View里面添加再设置一个外加View</h2><p>再mianActivity中添加进来：</p>
<pre><code>sideBar.setTextView<span class="comment">(dialog)</span>;
</code></pre><p>在sideBar中再对他进行设置。</p>
<pre><code>/<span class="keyword">*</span><span class="keyword">*</span>

 <span class="keyword">*</span> 在mainActivity中吧TextView设置进来。
 <span class="keyword">*</span> <span class="comment">@param mTextDialog</span>
 <span class="keyword">*</span>/
public void setTextView(TextView mTextDialog) {
    this.mTextDialog = mTextDialog;
}
</code></pre><p>在dispatchTouchEvent中对他进行监听和控制。</p>
<pre><code><span class="annotation">@Override</span>
<span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">dispatchTouchEvent</span><span class="params">(MotionEvent event)</span> </span>{
    <span class="keyword">final</span> <span class="keyword">int</span> action = event.getAction();
    <span class="keyword">final</span> <span class="keyword">float</span> y = event.getY();<span class="comment">// 点击y坐标</span>
    <span class="keyword">final</span> <span class="keyword">int</span> oldChoose = choose;
    <span class="keyword">final</span> OnTouchingLetterChangedListener listener = onTouchingLetterChangedListener;
    <span class="keyword">final</span> <span class="keyword">int</span> c = (<span class="keyword">int</span>) (y / getHeight() * b.length);<span class="comment">// 点击y坐标所占总高度的比例*b数组的长度就等于点击b中的个数.</span>

    <span class="keyword">switch</span> (action) {
    <span class="keyword">case</span> MotionEvent.ACTION_UP:
        setBackgroundDrawable(<span class="keyword">new</span> ColorDrawable(0x00000000));
        choose = -<span class="number">1</span>;<span class="comment">//</span>
        invalidate();
        <span class="keyword">if</span> (mTextDialog != <span class="keyword">null</span>) {
            mTextDialog.setVisibility(View.INVISIBLE);
        }
        <span class="keyword">break</span>;

    <span class="keyword">default</span>:
        setBackgroundResource(R.drawable.sidebar_background);
        <span class="keyword">if</span> (oldChoose != c) {
            <span class="keyword">if</span> (c &gt;= <span class="number">0</span> &amp;&amp; c &lt; b.length) {
                <span class="keyword">if</span> (listener != <span class="keyword">null</span>) {
                    listener.onTouchingLetterChanged(b[c]);
                }
                <span class="keyword">if</span> (mTextDialog != <span class="keyword">null</span>) {
                    mTextDialog.setText(b[c]);
                    mTextDialog.setVisibility(View.VISIBLE);
                }

                choose = c;
                invalidate();
            }
        }

        <span class="keyword">break</span>;
    }
    <span class="keyword">return</span> <span class="keyword">true</span>;
}
</code></pre><h2 id="View-VISIBLE、INVISIBLE、GONE的区别">View.VISIBLE、INVISIBLE、GONE的区别</h2><p>android中UI应用的开发中经常会使用view.setVisibility（）来设置控件的可见性，其中该函数有3个可选值，他们有着不同的含义：</p>
<p>View.VISIBLE—-&gt;可见</p>
<p>View.INVISIBLE—-&gt;不可见，但这个View仍然会占用在xml文件中所分配的布局空间，不重新layout </p>
<p>View.GONE——&gt;不可见，但这个View在ViewGroup中不保留位置，会重新layout，不再占用空间，那后面的view就会取代他的位置，</p>
<h2 id="invalidate()函数">invalidate()函数</h2><p> invalidate()函数的主要作用是请求View树进行重绘，该函数可以由应用程序调用，或者由系统函数间接调用，例如setEnable(), setSelected(), setVisiblity()都会间接调用到invalidate()来请求View树重绘，更新View树的显示。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/09/08/2015-9-8-5/" data-id="ciejpjim50008d0b2uhu2zzv2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


    
      <article id="post-2015-9-8-4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/08/2015-9-8-4/">2015/9/8-4</a>
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/2015/09/08/2015-9-8-4/">
    <time datetime="2015-09-08T07:21:50.000Z" itemprop="datePublished">2015-09-08</time>
  </a>
</div>
          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Android自定义控件">Android自定义控件</h1><p>我们每天的开发工作当中都在不停地跟View打交道，Android中的任何一个布局、任何一个控件其实都是直接或间接继承自View的，如TextView、Button、ImageView、ListView等。这些控件虽然是Android系统本身就提供好的，我们只需要拿过来使用就可以了，但你知道它们是怎样被绘制到屏幕上的吗？</p>
<h2 id="速成班">速成班</h2><p>先简单的画一个图</p>
<ul>
<li>首先要继承View</li>
<li>实现他的几个方法（ps.可以不做任何动作）</li>
<li>实现onDraw方法就可以开始画了</li>
<li>onDraw里面提供了一个参数Canvas，这是一块画布。然后我们要自己创建一只画笔Paint</li>
<li>然后用paint+Canvas绘制出各种东西。（ps。canvas。Draw绘制时要填入的参数代表距离父控件的距离）</li>
</ul>
<p>-</p>
<pre><code><span class="keyword">package</span> com.zsz.develop.sidebardemo;

<span class="keyword">import</span> android.content.Context;
<span class="keyword">import</span> android.graphics.Canvas;
<span class="keyword">import</span> android.graphics.Color;
<span class="keyword">import</span> android.graphics.Paint;
<span class="keyword">import</span> android.util.AttributeSet;
<span class="keyword">import</span> android.view.View;

<span class="javadoc">/**
 * Created by shengzhong on 2015/9/8.
 */</span>
<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">customView</span> <span class="keyword">extends</span> <span class="title">View</span> </span>{

<span class="keyword">private</span> Paint mPaint=<span class="keyword">new</span> Paint();

<span class="function"><span class="keyword">public</span> <span class="title">customView</span><span class="params">(Context context)</span> </span>{
    <span class="keyword">super</span>(context);
}

<span class="function"><span class="keyword">public</span> <span class="title">customView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>{
    <span class="keyword">super</span>(context, attrs);
}

<span class="function"><span class="keyword">public</span> <span class="title">customView</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>{
    <span class="keyword">super</span>(context, attrs, defStyleAttr);
}

<span class="annotation">@Override</span>
<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>{
    mPaint.setColor(Color.RED);
    canvas.drawRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">400</span>, mPaint);
    mPaint.setColor(Color.BLACK);
    mPaint.setTextSize(<span class="number">20</span>);
    String text =<span class="string">"hello"</span>;
    canvas.drawText(text,<span class="number">0</span>,getHeight()/<span class="number">2</span>,mPaint);

}
}
</code></pre><h2 id="绘制sideBar，通讯录边上右一栏的绘制">绘制sideBar，通讯录边上右一栏的绘制</h2><p>通过for循环绘制每个字母。选中和没选中的颜色也是不一样的。最后还要重置画笔。</p>
<pre><code><span class="comment">/**
 * 重写这个方法
 */</span>
<span class="keyword">protected</span> <span class="keyword">void</span> onDraw(Canvas canvas) {
    <span class="keyword">super</span>.onDraw(canvas);
    <span class="comment">// 获取焦点改变背景颜色.</span>
    <span class="built_in">int</span> <span class="variable">height</span> = getHeight();<span class="comment">// 获取对应高度</span>
    <span class="built_in">int</span> <span class="variable">width</span> = getWidth(); <span class="comment">// 获取对应宽度</span>
    <span class="built_in">int</span> singleHeight = <span class="variable">height</span> / b.length;<span class="comment">// 获取每一个字母的高度</span>

    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; b.length; i++) {
        paint.setColor(Color.rgb(<span class="number">33</span>, <span class="number">65</span>, <span class="number">98</span>));
        <span class="comment">// paint.setColor(Color.WHITE);</span>
        paint.setTypeface(Typeface.DEFAULT_BOLD);
        paint.setAntiAlias(<span class="keyword">true</span>);
        paint.setTextSize(<span class="number">20</span>);
        <span class="comment">// 选中的状态</span>
        <span class="keyword">if</span> (i == choose) {
            paint.setColor(Color.parseColor(<span class="string">"#3399ff"</span>));
            paint.setFakeBoldText(<span class="keyword">true</span>);
        }
        <span class="comment">// x坐标等于中间-字符串宽度的一半.</span>
        <span class="built_in">float</span> xPos = <span class="variable">width</span> / <span class="number">2</span> - paint.measureText(b[i]) / <span class="number">2</span>;
        <span class="built_in">float</span> yPos = singleHeight * i + singleHeight;
        canvas.drawText(b[i], xPos, yPos, paint);
        paint.reset();<span class="comment">// 重置画笔</span>
    }

}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/09/08/2015-9-8-4/" data-id="ciejpjim80009d0b2a8lf9ygp" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


    
      <nav id="page-nav">
        <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
      </nav>
    </section>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 zszdevelop<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>
    


<script src="//ajax.useso.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>